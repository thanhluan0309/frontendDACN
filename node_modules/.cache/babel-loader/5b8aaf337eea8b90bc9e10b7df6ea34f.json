{"ast":null,"code":"var _jsxFileName = \"D:\\\\ReactJS\\\\DoAn_CN\\\\my-app\\\\src\\\\components\\\\context\\\\authContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useReducer, useEffect } from \"react\";\nimport { authReducer } from \"../reducer/reducer\";\nimport axios from \"axios\";\nimport setAuthToken from \"../../utils/setAuthToken\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\n\nconst AuthContextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [authState, dispatch] = useReducer(authReducer, {\n    authLoading: true,\n    isAuthenticated: false,\n    user: null\n  });\n\n  const loadUser = async () => {\n    if (localStorage[\"token\"]) {\n      setAuthToken(localStorage[\"token\"]);\n    }\n\n    try {\n      const response = await axios.get(\"http://localhost:8080/Auth/\");\n\n      if (response.data.success) {\n        dispatch({\n          type: \"SET_AUTH\",\n          payload: {\n            isAuthenticated: true,\n            user: response.data.user\n          }\n        });\n      }\n    } catch (error) {\n      localStorage.removeItem(\"token\");\n      setAuthToken(null);\n      dispatch({\n        type: \"SET_AUTH\",\n        payload: {\n          isAuthenticated: false,\n          user: null\n        }\n      });\n    }\n  };\n\n  useEffect(() => loadUser()); // Context data\n\n  const authContextData = {\n    authState\n  }; // Return provider\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: authContextData,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AuthContextProvider, \"bgcdx9LnLdBhXzL712XmNlf3rSI=\");\n\n_c = AuthContextProvider;\nexport default AuthContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"names":["createContext","useReducer","useEffect","authReducer","axios","setAuthToken","AuthContext","AuthContextProvider","children","authState","dispatch","authLoading","isAuthenticated","user","loadUser","localStorage","response","get","data","success","type","payload","error","removeItem","authContextData"],"sources":["D:/ReactJS/DoAn_CN/my-app/src/components/context/authContext.js"],"sourcesContent":["import { createContext, useReducer, useEffect } from \"react\";\r\nimport { authReducer } from \"../reducer/reducer\";\r\n\r\nimport axios from \"axios\";\r\nimport setAuthToken from \"../../utils/setAuthToken\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nconst AuthContextProvider = ({ children }) => {\r\n  const [authState, dispatch] = useReducer(authReducer, {\r\n    authLoading: true,\r\n    isAuthenticated: false,\r\n    user: null,\r\n  });\r\n\r\n  const loadUser = async () => {\r\n    if (localStorage[\"token\"]) {\r\n      setAuthToken(localStorage[\"token\"]);\r\n    }\r\n\r\n    try {\r\n      const response = await axios.get(\"http://localhost:8080/Auth/\");\r\n      if (response.data.success) {\r\n        dispatch({\r\n          type: \"SET_AUTH\",\r\n          payload: { isAuthenticated: true, user: response.data.user },\r\n        });\r\n      }\r\n    } catch (error) {\r\n      localStorage.removeItem(\"token\");\r\n      setAuthToken(null);\r\n      dispatch({\r\n        type: \"SET_AUTH\",\r\n        payload: { isAuthenticated: false, user: null },\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => loadUser());\r\n\r\n  // Context data\r\n  const authContextData = { authState };\r\n\r\n  // Return provider\r\n  return (\r\n    <AuthContext.Provider value={authContextData}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthContextProvider;\r\n"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,EAAoCC,SAApC,QAAqD,OAArD;AACA,SAASC,WAAT,QAA4B,oBAA5B;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,0BAAzB;;AAEA,OAAO,MAAMC,WAAW,gBAAGN,aAAa,EAAjC;;AAEP,MAAMO,mBAAmB,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EAC5C,MAAM,CAACC,SAAD,EAAYC,QAAZ,IAAwBT,UAAU,CAACE,WAAD,EAAc;IACpDQ,WAAW,EAAE,IADuC;IAEpDC,eAAe,EAAE,KAFmC;IAGpDC,IAAI,EAAE;EAH8C,CAAd,CAAxC;;EAMA,MAAMC,QAAQ,GAAG,YAAY;IAC3B,IAAIC,YAAY,CAAC,OAAD,CAAhB,EAA2B;MACzBV,YAAY,CAACU,YAAY,CAAC,OAAD,CAAb,CAAZ;IACD;;IAED,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMZ,KAAK,CAACa,GAAN,CAAU,6BAAV,CAAvB;;MACA,IAAID,QAAQ,CAACE,IAAT,CAAcC,OAAlB,EAA2B;QACzBT,QAAQ,CAAC;UACPU,IAAI,EAAE,UADC;UAEPC,OAAO,EAAE;YAAET,eAAe,EAAE,IAAnB;YAAyBC,IAAI,EAAEG,QAAQ,CAACE,IAAT,CAAcL;UAA7C;QAFF,CAAD,CAAR;MAID;IACF,CARD,CAQE,OAAOS,KAAP,EAAc;MACdP,YAAY,CAACQ,UAAb,CAAwB,OAAxB;MACAlB,YAAY,CAAC,IAAD,CAAZ;MACAK,QAAQ,CAAC;QACPU,IAAI,EAAE,UADC;QAEPC,OAAO,EAAE;UAAET,eAAe,EAAE,KAAnB;UAA0BC,IAAI,EAAE;QAAhC;MAFF,CAAD,CAAR;IAID;EACF,CArBD;;EAuBAX,SAAS,CAAC,MAAMY,QAAQ,EAAf,CAAT,CA9B4C,CAgC5C;;EACA,MAAMU,eAAe,GAAG;IAAEf;EAAF,CAAxB,CAjC4C,CAmC5C;;EACA,oBACE,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAEe,eAA7B;IAAA,UACGhB;EADH;IAAA;IAAA;IAAA;EAAA,QADF;AAKD,CAzCD;;GAAMD,mB;;KAAAA,mB;AA2CN,eAAeA,mBAAf"},"metadata":{},"sourceType":"module"}