{"ast":null,"code":"var _jsxFileName = \"D:\\\\ReactJS\\\\DoAn_CN\\\\my-app\\\\src\\\\context\\\\AuthContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useReducer, useEffect } from \"react\";\nimport { authReducer } from \"../Reducer/authReducer\";\nimport { setAuthToken } from \"../utils/setAuthToken\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\n\nconst AuthcontextProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [authState, dispatch] = useReducer(authReducer, {\n    authLoading: true,\n    isAuthenticated: false,\n    user: null\n  });\n\n  const loadUser = async () => {\n    if (localStorage[\"token\"]) {\n      setAuthToken(localStorage[\"token\"]);\n    }\n\n    try {\n      const response = await axios.get(\"http://localhost:8080/Auth/\");\n\n      if (response.data.success) {\n        dispatch({\n          type: \"SET_AUTH\",\n          payload: {\n            isAuthenticated: true,\n            user: response.data.user\n          }\n        });\n      }\n    } catch (error) {\n      localStorage.removeItem(\"token\");\n      setAuthToken(null);\n      dispatch({\n        type: \"SET_AUTH\",\n        payload: {\n          isAuthenticated: false,\n          user: null\n        }\n      });\n    }\n  };\n\n  useEffect(loadUser());\n  const AuthcontextData = {\n    authState\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: AuthcontextData,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AuthcontextProvider, \"bgcdx9LnLdBhXzL712XmNlf3rSI=\");\n\n_c = AuthcontextProvider;\nexport default AuthcontextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthcontextProvider\");","map":{"version":3,"names":["createContext","useReducer","useEffect","authReducer","setAuthToken","axios","AuthContext","AuthcontextProvider","children","authState","dispatch","authLoading","isAuthenticated","user","loadUser","localStorage","response","get","data","success","type","payload","error","removeItem","AuthcontextData"],"sources":["D:/ReactJS/DoAn_CN/my-app/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useReducer, useEffect } from \"react\";\r\nimport { authReducer } from \"../Reducer/authReducer\";\r\nimport { setAuthToken } from \"../utils/setAuthToken\";\r\nimport axios from \"axios\";\r\nexport const AuthContext = createContext();\r\n\r\nconst AuthcontextProvider = ({ children }) => {\r\n  const [authState, dispatch] = useReducer(authReducer, {\r\n    authLoading: true,\r\n    isAuthenticated: false,\r\n    user: null,\r\n  });\r\n\r\n  const loadUser = async () => {\r\n    if (localStorage[\"token\"]) {\r\n      setAuthToken(localStorage[\"token\"]);\r\n    }\r\n    try {\r\n      const response = await axios.get(\"http://localhost:8080/Auth/\");\r\n      if (response.data.success) {\r\n        dispatch({\r\n          type: \"SET_AUTH\",\r\n          payload: { isAuthenticated: true, user: response.data.user },\r\n        });\r\n      }\r\n    } catch (error) {\r\n      localStorage.removeItem(\"token\");\r\n      setAuthToken(null);\r\n      dispatch({\r\n        type: \"SET_AUTH\",\r\n        payload: { isAuthenticated: false, user: null },\r\n      });\r\n    }\r\n  };\r\n     useEffect(loadUser());\r\n\r\n  const AuthcontextData = { authState };\r\n  return (\r\n    <AuthContext.Provider value={AuthcontextData}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\nexport default AuthcontextProvider;\r\n"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,EAAoCC,SAApC,QAAqD,OAArD;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,YAAT,QAA6B,uBAA7B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AACA,OAAO,MAAMC,WAAW,gBAAGN,aAAa,EAAjC;;AAEP,MAAMO,mBAAmB,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EAC5C,MAAM,CAACC,SAAD,EAAYC,QAAZ,IAAwBT,UAAU,CAACE,WAAD,EAAc;IACpDQ,WAAW,EAAE,IADuC;IAEpDC,eAAe,EAAE,KAFmC;IAGpDC,IAAI,EAAE;EAH8C,CAAd,CAAxC;;EAMA,MAAMC,QAAQ,GAAG,YAAY;IAC3B,IAAIC,YAAY,CAAC,OAAD,CAAhB,EAA2B;MACzBX,YAAY,CAACW,YAAY,CAAC,OAAD,CAAb,CAAZ;IACD;;IACD,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAN,CAAU,6BAAV,CAAvB;;MACA,IAAID,QAAQ,CAACE,IAAT,CAAcC,OAAlB,EAA2B;QACzBT,QAAQ,CAAC;UACPU,IAAI,EAAE,UADC;UAEPC,OAAO,EAAE;YAAET,eAAe,EAAE,IAAnB;YAAyBC,IAAI,EAAEG,QAAQ,CAACE,IAAT,CAAcL;UAA7C;QAFF,CAAD,CAAR;MAID;IACF,CARD,CAQE,OAAOS,KAAP,EAAc;MACdP,YAAY,CAACQ,UAAb,CAAwB,OAAxB;MACAnB,YAAY,CAAC,IAAD,CAAZ;MACAM,QAAQ,CAAC;QACPU,IAAI,EAAE,UADC;QAEPC,OAAO,EAAE;UAAET,eAAe,EAAE,KAAnB;UAA0BC,IAAI,EAAE;QAAhC;MAFF,CAAD,CAAR;IAID;EACF,CApBD;;EAqBGX,SAAS,CAACY,QAAQ,EAAT,CAAT;EAEH,MAAMU,eAAe,GAAG;IAAEf;EAAF,CAAxB;EACA,oBACE,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAEe,eAA7B;IAAA,UACGhB;EADH;IAAA;IAAA;IAAA;EAAA,QADF;AAKD,CApCD;;GAAMD,mB;;KAAAA,mB;AAqCN,eAAeA,mBAAf"},"metadata":{},"sourceType":"module"}