{"ast":null,"code":"var _jsxFileName = \"D:\\\\ReactJS\\\\DoAn_CN\\\\my-app\\\\src\\\\components\\\\LayoutConnectDB\\\\Layout.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport Button from \"react-bootstrap/esm/Button\";\nimport { DragDropContext } from \"react-beautiful-dnd\";\nimport { getPosts, initColumns, updateColumns, getAllColumns, DeletedColumns_ByID } from \"../Dashboard/postBehavior\";\nimport Column from \"./Column\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst LayoutDNDConnectDB = () => {\n  _s();\n\n  const [state, setstate] = useState([]);\n  const [columns, setColumns] = useState([]);\n\n  const getallPost = async () => {\n    try {\n      const GetallPostzx = await getPosts(localStorage.getItem(\"token\"));\n\n      if (GetallPostzx.success) {\n        setstate(GetallPostzx.Post_of_User);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  let title = {\n    title: \"Process\"\n  };\n\n  const updatecolumnsinit = async () => {\n    let UpdateInit = {\n      _id: localStorage.getItem(\"IDinitColumns\"),\n      taskIds: []\n    };\n\n    for (let index = 0; index < state.length; index++) {\n      UpdateInit.taskIds.push(state[index]._id);\n    }\n\n    await updateColumns(UpdateInit);\n  };\n\n  const GetallCol = async () => {\n    const gAllCol = await (await getAllColumns()).data.getALlCol;\n    setColumns(gAllCol);\n  };\n\n  const getInitColumns = async () => {\n    if (localStorage.getItem(\"IDinitColumns\") === null) {\n      DeltedById(localStorage.getItem(\"IDinitColumns\"));\n    } else {}\n\n    const getInit = await initColumns(title);\n    localStorage.setItem(\"IDinitColumns\", getInit.data.newcolumns._id);\n    updatecolumnsinit();\n    GetallCol();\n    console.log(\"colum\", columns); // getInitColumnOrder();\n  }; // const getInitColumnOrder = async () => {\n  //   console.log(\"colum after click\", columns);\n  //   const getInit = await initColumnOrder();\n  //   localStorage.setItem(\"IDinitColumnOrder\", getInit.data.newOrder._id);\n  //   updateOrderColumns();\n  //   getAllorderColumn();\n  // };\n  // const updateOrderColumns = async () => {\n  //   let UpdateInit = {\n  //     _id: localStorage.getItem(\"IDinitColumnOrder\"),\n  //     columOrder: [],\n  //   };\n  //   for (let index = 0; index < columns.length; index++) {\n  //     UpdateInit.columOrder.push(columns[index]._id);\n  //   }\n  //   await updateColumnOrder(UpdateInit);\n  // };\n  // const getAllorderColumn = async () => {\n  //   const getALLOrder = (await getAllColumnOrder()).data.getALlColOrder[0]\n  //     .columOrder[0];\n  // };\n\n\n  const DeltedById = async id => {\n    console.log(\"id delted\", id);\n    const ShowDelted = await DeletedColumns_ByID(id);\n  };\n\n  useEffect(() => {\n    GetallCol();\n    getallPost(); // getAllorderColumn();\n  });\n\n  const onDragEnd = results => {};\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      onClick: getInitColumns,\n      children: \"init map\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: onDragEnd,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\"\n        },\n        children: columns && columns.map((columID, index) => {\n          const colum = columns[index];\n          const task = colum.taskIds.map((taskIds, index) => colum.taskIds[index]);\n\n          if (task[0] === undefined) {\n            // console.log(\"colum,index\", colum, index);\n            const lay = []; // console.log(\"task\", lay);\n\n            return /*#__PURE__*/_jsxDEV(Column, {\n              column: colum,\n              tasks: lay\n            }, colum.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 19\n            }, this);\n          } else {\n            // console.log(\"colum,index\", colum, index);\n            // console.log(\"task\", task[0]);\n            return /*#__PURE__*/_jsxDEV(Column, {\n              column: colum,\n              tasks: task[0]\n            }, colum.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 19\n            }, this);\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(LayoutDNDConnectDB, \"f5oG0AfUiE1pekuqX+okZ0UTnEU=\");\n\n_c = LayoutDNDConnectDB;\nexport default LayoutDNDConnectDB;\n\nvar _c;\n\n$RefreshReg$(_c, \"LayoutDNDConnectDB\");","map":{"version":3,"names":["useState","useEffect","Button","DragDropContext","getPosts","initColumns","updateColumns","getAllColumns","DeletedColumns_ByID","Column","LayoutDNDConnectDB","state","setstate","columns","setColumns","getallPost","GetallPostzx","localStorage","getItem","success","Post_of_User","error","console","log","title","updatecolumnsinit","UpdateInit","_id","taskIds","index","length","push","GetallCol","gAllCol","data","getALlCol","getInitColumns","DeltedById","getInit","setItem","newcolumns","id","ShowDelted","onDragEnd","results","display","map","columID","colum","task","undefined","lay"],"sources":["D:/ReactJS/DoAn_CN/my-app/src/components/LayoutConnectDB/Layout.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport Button from \"react-bootstrap/esm/Button\";\r\nimport { DragDropContext } from \"react-beautiful-dnd\";\r\nimport {\r\n  getPosts,\r\n  initColumns,\r\n  updateColumns,\r\n  getAllColumns,\r\n  DeletedColumns_ByID,\r\n} from \"../Dashboard/postBehavior\";\r\nimport Column from \"./Column\";\r\nconst LayoutDNDConnectDB = () => {\r\n  const [state, setstate] = useState([]);\r\n  const [columns, setColumns] = useState([]);\r\n  const getallPost = async () => {\r\n    try {\r\n      const GetallPostzx = await getPosts(localStorage.getItem(\"token\"));\r\n      if (GetallPostzx.success) {\r\n        setstate(GetallPostzx.Post_of_User);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  let title = {\r\n    title: \"Process\",\r\n  };\r\n\r\n  const updatecolumnsinit = async () => {\r\n    let UpdateInit = {\r\n      _id: localStorage.getItem(\"IDinitColumns\"),\r\n      taskIds: [],\r\n    };\r\n    for (let index = 0; index < state.length; index++) {\r\n      UpdateInit.taskIds.push(state[index]._id);\r\n    }\r\n    await updateColumns(UpdateInit);\r\n  };\r\n\r\n  const GetallCol = async () => {\r\n    const gAllCol = await (await getAllColumns()).data.getALlCol;\r\n    setColumns(gAllCol);\r\n  };\r\n\r\n  const getInitColumns = async () => {\r\n    if( localStorage.getItem(\"IDinitColumns\") === null){\r\n      DeltedById(localStorage.getItem(\"IDinitColumns\"));\r\n    }else{}\r\n  \r\n\r\n    const getInit = await initColumns(title);\r\n    localStorage.setItem(\"IDinitColumns\", getInit.data.newcolumns._id);\r\n\r\n    updatecolumnsinit();\r\n    GetallCol();\r\n    console.log(\"colum\", columns);\r\n    // getInitColumnOrder();\r\n  };\r\n\r\n  // const getInitColumnOrder = async () => {\r\n  //   console.log(\"colum after click\", columns);\r\n  //   const getInit = await initColumnOrder();\r\n  //   localStorage.setItem(\"IDinitColumnOrder\", getInit.data.newOrder._id);\r\n  //   updateOrderColumns();\r\n  //   getAllorderColumn();\r\n  // };\r\n\r\n  // const updateOrderColumns = async () => {\r\n  //   let UpdateInit = {\r\n  //     _id: localStorage.getItem(\"IDinitColumnOrder\"),\r\n  //     columOrder: [],\r\n  //   };\r\n  //   for (let index = 0; index < columns.length; index++) {\r\n  //     UpdateInit.columOrder.push(columns[index]._id);\r\n  //   }\r\n  //   await updateColumnOrder(UpdateInit);\r\n  // };\r\n\r\n  // const getAllorderColumn = async () => {\r\n  //   const getALLOrder = (await getAllColumnOrder()).data.getALlColOrder[0]\r\n  //     .columOrder[0];\r\n  // };\r\n  const DeltedById = async (id) => {\r\n    console.log(\"id delted\", id);\r\n    const ShowDelted = await DeletedColumns_ByID(id);\r\n  };\r\n  useEffect(() => {\r\n    GetallCol();\r\n    getallPost();\r\n    // getAllorderColumn();\r\n  });\r\n  const onDragEnd = (results) => {};\r\n  return (\r\n    <>\r\n      <Button onClick={getInitColumns}>init map</Button>\r\n      <DragDropContext onDragEnd={onDragEnd}>\r\n        <div style={{ display: \"flex\" }}>\r\n          {columns &&\r\n            columns.map((columID, index) => {\r\n              const colum = columns[index];\r\n              const task = colum.taskIds.map(\r\n                (taskIds, index) => colum.taskIds[index]\r\n              );\r\n              if (task[0] === undefined) {\r\n                // console.log(\"colum,index\", colum, index);\r\n                const lay = [];\r\n                // console.log(\"task\", lay);\r\n                return (\r\n                  <Column key={colum.id} column={colum} tasks={lay}></Column>\r\n                );\r\n              } else {\r\n                // console.log(\"colum,index\", colum, index);\r\n                // console.log(\"task\", task[0]);\r\n                return (\r\n                  <Column\r\n                    key={colum.id}\r\n                    column={colum}\r\n                    tasks={task[0]}\r\n                  ></Column>\r\n                );\r\n              }\r\n            })}\r\n        </div>\r\n      </DragDropContext>\r\n    </>\r\n  );\r\n};\r\nexport default LayoutDNDConnectDB;\r\n"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,SAASC,eAAT,QAAgC,qBAAhC;AACA,SACEC,QADF,EAEEC,WAFF,EAGEC,aAHF,EAIEC,aAJF,EAKEC,mBALF,QAMO,2BANP;AAOA,OAAOC,MAAP,MAAmB,UAAnB;;;;AACA,MAAMC,kBAAkB,GAAG,MAAM;EAAA;;EAC/B,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBZ,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAM,CAACa,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAC,EAAD,CAAtC;;EACA,MAAMe,UAAU,GAAG,YAAY;IAC7B,IAAI;MACF,MAAMC,YAAY,GAAG,MAAMZ,QAAQ,CAACa,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,CAAnC;;MACA,IAAIF,YAAY,CAACG,OAAjB,EAA0B;QACxBP,QAAQ,CAACI,YAAY,CAACI,YAAd,CAAR;MACD;IACF,CALD,CAKE,OAAOC,KAAP,EAAc;MACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;IACD;EACF,CATD;;EAUA,IAAIG,KAAK,GAAG;IACVA,KAAK,EAAE;EADG,CAAZ;;EAIA,MAAMC,iBAAiB,GAAG,YAAY;IACpC,IAAIC,UAAU,GAAG;MACfC,GAAG,EAAEV,YAAY,CAACC,OAAb,CAAqB,eAArB,CADU;MAEfU,OAAO,EAAE;IAFM,CAAjB;;IAIA,KAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGlB,KAAK,CAACmB,MAAlC,EAA0CD,KAAK,EAA/C,EAAmD;MACjDH,UAAU,CAACE,OAAX,CAAmBG,IAAnB,CAAwBpB,KAAK,CAACkB,KAAD,CAAL,CAAaF,GAArC;IACD;;IACD,MAAMrB,aAAa,CAACoB,UAAD,CAAnB;EACD,CATD;;EAWA,MAAMM,SAAS,GAAG,YAAY;IAC5B,MAAMC,OAAO,GAAG,MAAM,CAAC,MAAM1B,aAAa,EAApB,EAAwB2B,IAAxB,CAA6BC,SAAnD;IACArB,UAAU,CAACmB,OAAD,CAAV;EACD,CAHD;;EAKA,MAAMG,cAAc,GAAG,YAAY;IACjC,IAAInB,YAAY,CAACC,OAAb,CAAqB,eAArB,MAA0C,IAA9C,EAAmD;MACjDmB,UAAU,CAACpB,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAD,CAAV;IACD,CAFD,MAEK,CAAE;;IAGP,MAAMoB,OAAO,GAAG,MAAMjC,WAAW,CAACmB,KAAD,CAAjC;IACAP,YAAY,CAACsB,OAAb,CAAqB,eAArB,EAAsCD,OAAO,CAACJ,IAAR,CAAaM,UAAb,CAAwBb,GAA9D;IAEAF,iBAAiB;IACjBO,SAAS;IACTV,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBV,OAArB,EAXiC,CAYjC;EACD,CAbD,CAjC+B,CAgD/B;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;;;EACA,MAAMwB,UAAU,GAAG,MAAOI,EAAP,IAAc;IAC/BnB,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBkB,EAAzB;IACA,MAAMC,UAAU,GAAG,MAAMlC,mBAAmB,CAACiC,EAAD,CAA5C;EACD,CAHD;;EAIAxC,SAAS,CAAC,MAAM;IACd+B,SAAS;IACTjB,UAAU,GAFI,CAGd;EACD,CAJQ,CAAT;;EAKA,MAAM4B,SAAS,GAAIC,OAAD,IAAa,CAAE,CAAjC;;EACA,oBACE;IAAA,wBACE,QAAC,MAAD;MAAQ,OAAO,EAAER,cAAjB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAEE,QAAC,eAAD;MAAiB,SAAS,EAAEO,SAA5B;MAAA,uBACE;QAAK,KAAK,EAAE;UAAEE,OAAO,EAAE;QAAX,CAAZ;QAAA,UACGhC,OAAO,IACNA,OAAO,CAACiC,GAAR,CAAY,CAACC,OAAD,EAAUlB,KAAV,KAAoB;UAC9B,MAAMmB,KAAK,GAAGnC,OAAO,CAACgB,KAAD,CAArB;UACA,MAAMoB,IAAI,GAAGD,KAAK,CAACpB,OAAN,CAAckB,GAAd,CACX,CAAClB,OAAD,EAAUC,KAAV,KAAoBmB,KAAK,CAACpB,OAAN,CAAcC,KAAd,CADT,CAAb;;UAGA,IAAIoB,IAAI,CAAC,CAAD,CAAJ,KAAYC,SAAhB,EAA2B;YACzB;YACA,MAAMC,GAAG,GAAG,EAAZ,CAFyB,CAGzB;;YACA,oBACE,QAAC,MAAD;cAAuB,MAAM,EAAEH,KAA/B;cAAsC,KAAK,EAAEG;YAA7C,GAAaH,KAAK,CAACP,EAAnB;cAAA;cAAA;cAAA;YAAA,QADF;UAGD,CAPD,MAOO;YACL;YACA;YACA,oBACE,QAAC,MAAD;cAEE,MAAM,EAAEO,KAFV;cAGE,KAAK,EAAEC,IAAI,CAAC,CAAD;YAHb,GACOD,KAAK,CAACP,EADb;cAAA;cAAA;cAAA;YAAA,QADF;UAOD;QACF,CAvBD;MAFJ;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QAFF;EAAA,gBADF;AAkCD,CAnHD;;GAAM/B,kB;;KAAAA,kB;AAoHN,eAAeA,kBAAf"},"metadata":{},"sourceType":"module"}